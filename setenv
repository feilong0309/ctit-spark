# What prefix should be used for your job names (useful for repetitive package names). End with a dot.
export CLASS_PREFIX=nl.utwente.bigdata.

# Some admin variables
export PROJECT_HOME=$PWD
export LIBJARS=$(echo $PROJECT_HOME/target/lib/*.jar | tr ' ' ',')
export HADOOP_CONF_DIR=/etc/hadoop/conf
export USER=$(whoami)
export SPARK_DIR=/usr/lib/spark/bin
# run tool with yarn-resource manager choosing a worker as the driver
function runTool() {
        name=$1
        shift
        export LIBJARS=$(echo $PROJECT_HOME/target/lib/*.jar | tr ' ' ',')
        $SPARK_DIR/spark-submit --class ${CLASS_PREFIX}$name \
            --name $name \
            --master yarn-cluster \
            --jars $LIBJARS \
            --queue $USER \
            target/ctit-spark*.jar \
            $@
}
# run tool with the local machine being the driver program.
function runToolClient() {
        name=$1
        shift
        $SPARK_DIR/spark-submit --class ${CLASS_PREFIX}$name \
            --master yarn-client \
            --queue $USER \
            target/ctit-spark*.jar \
            $@
}
# create a shell
function runShell() {
        $SPARK_DIR/spark-shell \
            --master yarn-client \
            --conf spark.ui.port=4050 \
            --queue ${USER} \
            $@ 
}
